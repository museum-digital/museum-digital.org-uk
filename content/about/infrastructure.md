+++
title = "Інфраструктура"
description = "Інформація про інфраструктуру museum-digital"

[extra]
keywords = "museum-digital, інфраструктура, сервери"
banner_image = "/data/img/banners/A-test-of-a-pneumatic-ASH-handling-system_1914_InternetArchive_p216_rotated.jpg"
banner_image_alt = " Image from page 216 of 'A test of a pneumatic ASH handling system' (1914) "
html_id = "infrastructure"
faq = [
    [
        "Де знаходяться сервери museum-digital?",
        "Наші сервери розташовані в Німеччині. Центр досліджень і підвищення кваліфікації в галузі дигіталізації землі Берлін [digiS](https://www.digis-berlin.de/) щедро спонсорує й обслуговує один із них. Решта серверів орендуються в Strato."
    ],
]
+++

## Інфраструктура

Ми прагнемо до того, щоб музеї могли керувати своїми даними та публікувати їх _спільно_. Так вони отримують переваги від спільної роботи - як у царині контрольованих словників, так і в їхній видимості на одному сайті зі спільною функцією пошуку. Тому всі інструменти museum-digital централізовані. У наше завдання входить реалізація розробленого нами програмного забезпечення, а також управління системами, що працюють на ньому.

----

### Сервери


Хостинг і розробка museum-digital здійснюється з використанням трьох серверів. Один сервер, розташований у Strato, використовується як основний сервер для редагування даних і надання їх широкій публіці. Другий сервер, розміщений у digiS у Берліні, використовується як основний сервер для зберігання зображень і резервного копіювання. Нарешті, третій сервер, також розташований у Strato, використовується для розміщення здебільшого внутрішніх інструментів, таких як [Nextcloud](https://nextcloud.com/) і [Gitea](https://gitea.io/), а також нашої пошти. Це забезпечує виконання на промислових серверах тільки мінімуму необхідного дорогого програмного забезпечення.

#### Стратегія резервного копіювання

У museum-digital є три типи даних для резервного копіювання: вміст бази даних, медіафайли та файли конфігурації.

Вміст бази даних резервно копіюється раз на день, шифрується GPG і потім синхронізується сервером резервного копіювання. Ми зберігаємо повні, зашифровані дампи за останні 7 днів, доступні для швидкого відновлення в будь-який час (як на основному сервері бази даних, так і на сервері резервного копіювання). Раз на день дампи копіюються в центральну систему резервного копіювання digiS.

Сервер резервного копіювання одночасно використовується як сервер зображень. Для виконання цієї функції він автоматично синхронізує всі носії кожні три-шість годин - вночі в Європі частота синхронізації знижується, оскільки вночі практично не додаються нові файли, які могли б вимагати додаткового використання пропускної здатності та обчислювальних ресурсів. Таким чином, друга копія всіх медіафайлів доступна в будь-який час. Медіафайли також включаються в централізовану систему резервного копіювання digiS раз на день, аналогічно дампам баз даних.

Нарешті, файли конфігурації регулярно синхронізуються в git-репозиторій, який потім синхронізується з нашим екземпляром Gitea і передається членам нашої команди адміністраторів.

Для створення додаткового рівня резервного копіювання, ми щомісяця створюємо миттєву копію збережених даних.

----

### Open Source або відкритий вихідний код

Зараз ми займаємося наданням дедалі більшої частини нашого коду у форматі open source. Орієнтовані на зміст open-source частини, як, наприклад, посібник користувача, доступні та можуть редагуватися через [GitHub](https://github.com/museum-digital/). При цьому модулі, що використовуються в основних сервісах, розміщені на нашій власній сторінці Gitea.

----

### Technology Stack

Наші системи працюють на досить поширеному технологічному стеку: [Ubuntu](https://ubuntu.com/) для операційної системи, [nginx](https://www.nginx.com/) для веб-сервера, [MariaDB](https://mariadb.org/) для сервера бази даних і [PHP](https://www.php.net/) - як основна мова програмування для всього серверного коду. [Redis](https://redis.io/) і [Manticore](https://manticoresearch.com/) використовуються відповідно для швидкого сховища ключів і серверів повнотекстового пошуку. Для серверної розробки ми використовуємо [PHPUnit](https://phpunit.de/) для модульного тестування, [PHPStan](https://phpstan.org/) для статичного аналізу коду і [PHPBench](https://github.com/phpbench/phpbench) для бенчмаркінгу заданих функцій.

Деякі сайти, які не потребують будь-якої глибшої серверної логіки, працюють безпосередньо на nginx (архів документів) або генеруються за допомогою генераторів статичних сайтів ([Zola](https://www.getzola.org/) у випадку цього сайту, [mdbook](https://github.com/rust-lang/mdBook) у випадку довідника).

----

{{ build_faq_list(title = "Часті запитання") }}
